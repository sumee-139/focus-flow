# メモリバンクシステム未導入プロジェクトへの導入手順書

既に稼働中だが、Claude Code Memory Bankシステムを一切使用していないプロジェクトに、ゼロから体系的にシステムを導入するための実践ガイドです。

## 🎯 対象プロジェクト

### 適用条件
- [ ] 既に開発・運用が進行中
- [ ] Claude Codeを使用しているが、Memory Bankは未活用
- [ ] プロジェクト固有の知識が散在・未整理
- [ ] 技術決定の経緯が不明確
- [ ] 新メンバーのオンボーディングに時間がかかる

### 導入効果予測
- **短期（1-2週間）**: 情報集約・可視化・AIデバッグ支援強化
- **中期（1-2ヶ月）**: 開発効率向上・コスト削減・エラーパターン分析
- **長期（3ヶ月以降）**: 知識資産化・技術負債管理・AI駆動開発実現

---

## 📋 事前準備・現状分析

### Phase 0: 現状把握（所要時間：30分）

#### 現状分析チェックリスト
```bash
# プロジェクト構造確認
find . -name "*.md" -type f | head -20
find . -name "README*" -type f
find . -name "docs" -type d
ls -la .claude/ 2>/dev/null || echo "Memory Bank未導入"
```

#### 情報散在度調査
- [ ] README.mdの情報量・網羅性
- [ ] docs/ディレクトリの有無・内容
- [ ] コメント・ドキュメントの充実度
- [ ] 技術選択理由の記録状況
- [ ] 新メンバー向け情報の整備状況

#### チーム状況確認
- [ ] プロジェクトメンバー数
- [ ] Claude Code使用経験レベル
- [ ] 文書化への意識・習慣
- [ ] 変更への抵抗感

---

## 🚀 段階的導入戦略

### Stage 1: 基盤構築（Week 1）- 影響度：極小

#### 1.1 ディレクトリ構造作成
```bash
# Memory Bank基本構造
mkdir -p .claude/core
mkdir -p .claude/context
mkdir -p .claude/scripts
mkdir -p docs

# 段階的に追加（後日）
# mkdir -p .claude/debug
# mkdir -p .claude/commands
# mkdir -p docs/adr
```

#### 1.2 最小限の設定ファイル導入
```bash
# キャッシュ設定 + セキュリティ設定（即座効果）
cat > .claude/settings.json << 'EOF'
{
  "env": {
    "CLAUDE_CACHE": "./.ccache"
  },
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": ".claude/scripts/deny-check.sh"
          }
        ]
      }
    ]
  }
}
EOF

# .gitignore更新
echo ".ccache/" >> .gitignore
echo "*.cache" >> .gitignore
```

#### 1.2.1 セキュリティ機能導入
```bash
# セキュリティスクリプト設置（テンプレートからコピー）
# deny-check.sh, allow-check.sh, test-security.shを配置
chmod +x .claude/scripts/*.sh

# セキュリティテスト実行
.claude/scripts/test-security.sh
```

#### 1.2.2 AI Logger機能導入（推奨）
```bash
# AI Logger スクリプト設置（テンプレートからコピー）
# ai-logger.sh, analyze-ai-logs.py, ai-logger-README.md を配置
chmod +x .claude/scripts/ai-logger.sh
chmod +x .claude/scripts/analyze-ai-logs.py

# settings.json に AI Logger を追加
# PostToolUse セクションに以下を追加：
# {
#   "type": "command",
#   "command": ".claude/scripts/ai-logger.sh"
# }

# 動作確認
echo "test" > test.txt && rm test.txt
ls -la ~/.claude/ai-activity.jsonl
```

**AI Logger のメリット**：
- 構造化ログでAIがエラーを効果的に分析
- プロジェクト・環境情報の自動収集
- 既存ログシステムとの並行動作
- 参考: [Vibe Logger](https://github.com/fladdict/vibe-logger)

#### 1.3 現状のスナップショット作成
```markdown
# .claude/core/overview.md
---
cache_control: {"type": "ephemeral"}
---
# プロジェクト概要（暫定版）

## 基本情報
- **開始日**: [記録されている開始日]
- **メンバー**: [現在のメンバー数・役割]
- **技術スタック**: [現在使用している技術]

## 現状
- **進捗**: [大まかな進捗状況]
- **直近の課題**: [認識している問題]
- **次の予定**: [今後の予定]

※この文書は導入初期版です。段階的に詳細化します。
```

#### 期待効果
- **即座**: プロンプトキャッシュによる90%コスト削減
- **心理**: 「情報整理の場所」の確保
- **デバッグ**: AI分析に最適化されたログでエラー解決効率向上

### Stage 2: 情報集約（Week 2-3）- 影響度：小

#### 2.1 既存情報の移行・整理
```bash
# 既存READMEからの情報抽出
# 手動で重要部分を.claude/core/overview.mdに統合

# 既存docs/からの情報整理
# 重要な技術情報を.claude/context/tech.mdに集約
```

#### 2.2 技術情報の体系化
```markdown
# .claude/context/tech.md
---
cache_control: {"type": "ephemeral"}
---
# 技術詳細

## 現在の技術スタック
[既存システムから抽出した技術情報]

## 開発環境
[セットアップ手順を既存から収集]

## 運用情報
[デプロイ・監視方法]
```

#### 2.3 履歴・経緯の記録開始
```markdown
# .claude/context/history.md
# プロジェクト履歴

## 重要な決定事項（遡及記録）
### [日付] [タイトル]
- **背景**: [可能な範囲で]
- **決定**: [現在の状況から推測]
- **影響**: [現在への影響]

※情報が不完全な部分は今後の決定で補完
```

#### 期待効果
- **情報集約**: 散在情報の一元化
- **可視化**: プロジェクト全体像の明確化

### Stage 3: 運用定着（Week 4-6）- 影響度：中

#### 3.1 日常ワークフローへの統合
```markdown
# .claude/core/current.md
# 現在の状況

## 今週の重点
- [優先度1] [タスク名]
- [優先度2] [タスク名]

## 進行中の課題
- **[課題名]**: [状況] - [次のアクション]

※週1回更新を習慣化
```

#### 3.2 次アクション管理
```markdown
# .claude/core/next.md
# 次のアクション

## 今日やること
1. [具体的タスク1]
2. [具体的タスク2]
3. [具体的タスク3]

## 今週のゴール
- [週次目標]

※日次で簡単更新
```

#### 3.3 カスタムコマンド導入
```markdown
# .claude/core/templates.md
---
cache_control: {"type": "ephemeral"}
---
# クイックテンプレート

## 基本パターン
### `/agent:planner` - 戦略計画・設計
[Mermaid図付きのプロジェクト固有計画テンプレート]

### `/agent:builder` - 実装・デバッグ
[技術的実装タスク用テンプレート]

### `/project:daily` - 日次更新
[振り返りメモの簡単フォーマット]
```

#### 期待効果
- **習慣化**: Memory Bank更新の日常化
- **効率化**: 定型作業の簡素化

### Stage 4: 高度機能導入（Week 7-8）- 影響度：中-高

#### 4.1 ADRシステム導入
```bash
mkdir -p docs/adr
cp [template-path]/docs/adr/template.md docs/adr/
```

#### 4.2 技術負債管理開始
```markdown
# .claude/context/debt.md
---
cache_control: {"type": "ephemeral"}
---
# 技術負債トラッキング

## 現在認識している負債
[既存の「なんとなく気になること」を体系化]

### 高優先度 🔥
| 負債内容 | 推定コスト | 影響範囲 |
|---------|-----------|---------|
| [具体的な問題] | [時間] | [範囲] |
```

#### 4.3 チーム全体への展開
- Memory Bank活用の共有セッション（30分）
- 更新ルール・責任の明確化
- 継続的な改善サイクルの確立

---

## 👥 チーム導入戦略

### 抵抗最小化アプローチ

#### 段階的メンバー巻き込み
1. **Week 1-2**: 主担当者のみで基盤構築
2. **Week 3-4**: コア開発者（2-3名）に共有・フィードバック
3. **Week 5-6**: チーム全体への展開
4. **Week 7-8**: 運用定着・ルール策定

#### 価値実感の演出
- **即座価値**: キャッシュ効果によるコスト削減を数値で共有
- **情報価値**: 「あの件って何だっけ？」への即座回答
- **効率価値**: 新メンバーオンボーディング時間短縮

### 継続的改善サイクル

#### 週次レビュー（10分）
- Memory Bankの使用状況確認
- 不便な点・改善点の収集
- 次週の改善アクション決定

#### 月次最適化（30分）
- 使用頻度の低いファイルのアーカイブ
- 新しいテンプレート・パターンの追加
- チーム固有のカスタマイズ

---

## 🎯 導入判断基準

### 導入GO判断
以下の条件が2つ以上当てはまる場合、導入推奨：
- [ ] プロジェクト期間が3ヶ月以上残っている
- [ ] チームサイズが2名以上
- [ ] 新メンバー参加の予定がある
- [ ] 技術的複雑性が中程度以上
- [ ] ドキュメント不足を実感している

### 導入見送り判断
以下の場合は導入を見送り：
- [ ] プロジェクト終了まで1ヶ月未満
- [ ] チーム全体がClaude Code未経験
- [ ] 現在、重大な納期プレッシャー下
- [ ] 文書化への強い抵抗感がある

---

## 📊 成功指標・効果測定

### 定量指標（月次測定）

#### コスト・効率
- **Claude Code課金額**: 導入前後比較
- **重複質問回数**: 「あれってどうだっけ？」の頻度
- **オンボーディング時間**: 新メンバーの立ち上がり期間

#### 活用度
- **Memory Bank更新頻度**: 週次更新率
- **参照頻度**: Memory Bankファイルへのアクセス
- **cache_controlヒット率**: キャッシュ効果実感

### 定性指標（月次チーム振り返り）

#### チーム状況
- **情報アクセシビリティ**: 必要情報の見つけやすさ
- **技術的透明性**: 技術選択理由の理解度
- **知識共有**: チーム内での情報共有の質

---

## ⚡ よくある課題と対処法

### 導入初期の課題

**Q: 「何を書けばいいかわからない」**
A: 完璧を求めず、現状を書くことから開始。「現在困っていること」「よく聞かれること」を箇条書きで

**Q: 「更新が続かない」**
A: 週1回、5分間の「Memory Bank更新タイム」を設定。完璧よりも継続を重視

**Q: 「チームメンバーが使ってくれない」**
A: 「便利さ」の実感が重要。具体的な価値体験（即座回答、コスト削減）を共有

### 運用中の課題

**Q: 「情報が古くなる」**
A: cache_control適用ファイル（長期安定）と頻繁更新ファイルの分離。定期レビュー設定

**Q: 「Memory Bankが肥大化」**
A: アーカイブルールの設定。「3ヶ月参照なし」でarchive/に移動

**Q: 「形骸化してしまった」**
A: 利用価値の再確認。新機能・改善の継続的導入

---

## 🔄 長期的な進化パス

### 3ヶ月後の姿
- Memory Bank習慣の完全定着
- プロジェクト固有のテンプレート・パターン確立
- 新メンバーオンボーディングの体系化

### 6ヶ月後の姿
- 他プロジェクトへの展開・ノウハウ共有
- より高度なADR・負債管理の活用
- チーム固有の最適化完了

### 1年後の姿
- 組織レベルでのMemory Bank文化の浸透
- ベストプラクティスの他チームへの横展開
- 継続的改善サイクルの自動化

---

## 📋 導入チェックリスト

### 導入準備
- [ ] 現状分析完了（プロジェクト情報・チーム状況）
- [ ] 導入判断基準での評価完了
- [ ] チーム合意取得（最低限のキーメンバー）
- [ ] 導入スケジュール策定

### Stage 1（基盤構築）
- [ ] .claude/ディレクトリ構造作成
- [ ] settings.json作成・キャッシュ設定
- [ ] .gitignore更新
- [ ] overview.md暫定版作成
- [ ] セキュリティ機能導入（オプション）
- [ ] AI Logger導入（推奨）
- [ ] キャッシュ効果確認

### Stage 2（情報集約）
- [ ] 既存情報のtech.md移行
- [ ] history.md遡及記録
- [ ] 重要情報のcache_control適用
- [ ] 初期Memory Bank完成

### Stage 3（運用定着）
- [ ] current.md・next.md運用開始
- [ ] 週次更新ルール策定
- [ ] templates.md・カスタムコマンド作成
- [ ] チーム共有・フィードバック収集

### Stage 4（高度機能）
- [ ] ADRシステム導入
- [ ] 技術負債管理開始
- [ ] チーム全体展開
- [ ] 継続改善サイクル確立

この段階的アプローチにより、メモリバンクシステム未経験のプロジェクトでも、確実かつ安全にシステム導入が可能になります。